# Pan

Pan (Project Analyzer) - Это CLI-приложение, разработанное на Rust, которое предоставляет набор инструментов для работы с файловыми структурами и содержимым файлов.

## Особенности

- **Сбор структуры проекта:** Программа рекурсивно обходит директорию проекта, собирая структуру всех каталогов и файлов.
  
- **Вывод содержимого файлов:** По умолчанию программа собирает только структуру, но при указании опции `--with-file-content` можно включить содержимое файлов с указанными расширениями.
  
- **Исключение файлов и директорий:** Вы можете исключить определённые пути или файлы, используя опцию `--exclude`. Это удобно для исключения временных файлов или артефактов сборки.
  
- **Поддержка паттернов:** Поддерживаются паттерны, такие как `*.lock`, что позволяет гибко настраивать процесс сбора.

## Установка

Для сборки и установки проекта локально выполните:

```bash
make install
```

Это выполнит следующие шаги:
1. **Сборка проекта**: Проект будет скомпилирован с использованием `cargo`.
2. **Установка**: Программа будет установлена в вашу систему, и вы сможете запускать её из командной строки.

После установки вы можете использовать команду `pan` для запуска приложения. Пример использования:

```bash
pan sumcode --project-dir ./src --output result.txt
```

## Команды и опции

### Команда `sumcode`
Команда `sumcode` позволяет собрать структуру проекта и (опционально) содержимое файлов с определёнными расширениями в один текстовый файл.

**Синтаксис:**

```bash
cargo run -- sumcode --project-dir <директория> [опции]
```

**Опции:**

- `--project-dir <директория>`: Указывает корневую директорию проекта, структуру которого нужно собрать. **(Обязательно)**
  
- `--output <файл>`: Указывает файл, в который будет записан результат. Если не указано, вывод будет в консоль.
  
- `--exclude <пути>`: Перечисляет пути или паттерны, которые нужно исключить из сбора. Можно указывать несколько значений, разделённых пробелом. Паттерны могут содержать символы `*`, например: `--exclude target build *.lock`.
  
- `--with-file-content <расширения>`: Перечисляет расширения файлов, содержимое которых нужно включить в итоговый файл. Пример: `--with-file-content rs,toml`. Можно указывать несколько расширений, разделённых запятой.
  
**Примеры использования:**

1. Собрать структуру проекта без вывода содержимого файлов и вывести результат в консоль:

    ```bash
    cargo run -- sumcode --project-dir ./src
    ```

2. Собрать структуру проекта с включением содержимого файлов с расширениями `.rs` и `.toml`, и записать результат в `result.txt`:

    ```bash
    cargo run -- sumcode --project-dir ./src --output result.txt --with-file-content rs,toml
    ```

3. Исключить определённые пути и файлы из сбора структуры:

    ```bash
    cargo run -- sumcode --project-dir ./src --exclude target build *.lock --output result.txt
    ```

## Команды Makefile

- `make build` — Сборка проекта.
- `make test` — Запуск тестов.
- `make run` — Пример запуска проекта.
- `make clean` — Очистка артефактов сборки.
- `make install` — Сборка и установка проекта.
- `make doc` — Генерация документации.

## Лицензия

Проект распространяется под лицензией MIT. См. [LICENSE](./LICENSE.md) для получения дополнительной информации.